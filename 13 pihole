### https://hub.docker.com/r/pihole/pihole

#with docker compose:
vim docker-compose.yaml

version: "3"
services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    ports:
      - 53:53/tcp
      - 53:53/udp
      - 67:67/udp
      - 86:80/tcp
      - 443:443/tcp
    environment:
      TZ: Europe/Madrid
      WEBPASSWORD: password #optional
    # Volumes store your data between container upgrades
    volumes:
      - home/pi/etc/pihole/:/etc/pihole/
      - home/pi/etc/pihole/etc-dnsmasq.d/:/etc/dnsmasq.d/
    # Recommended but not required (DHCP needs NET_ADMIN)
    cap_add:
      - NET_ADMIN
    restart: unless-stopped
    
sudo docker-compose up -d   

Change DNS on the device or on the router(applicable to all devices connected to the LAN) to the rpi address. For example to 192.168.1.31
    
### OPENDNS - domain name system:

nslookup (windows)
youtube.com
    
    
    
    
### https://github.com/theNetworkChuck/NetworkChuck/blob/master/pihole.sh    

nano pihole.sh


 #!/bin/bash

# https://github.com/pi-hole/docker-pi-hole/blob/master/README.md

docker run -d \
    --name pihole \
    -p 53:53/tcp -p 53:53/udp \
    -p 80:80 \
    -p 443:443 \
    -p 8080:8080 \
    -e TZ="Europe/Madrid" \
    -v "$(pwd)/etc-pihole/:/etc/pihole/" \
    -v "$(pwd)/etc-dnsmasq.d/:/etc/dnsmasq.d/" \
    --dns=127.0.0.1 --dns=1.1.1.1 \
    --restart=unless-stopped \
    thenetworkchuck/networkchuck_pihole

printf 'Starting up pihole container '
for i in $(seq 1 20); do
    if [ "$(docker inspect -f "{{.State.Health.Status}}" pihole)" == "healthy" ] ; then
        printf ' OK'
        echo -e "\n$(docker logs pihole 2> /dev/null | grep 'password:') for your pi-hole: https://${IP}/admin/"
        exit 0
    else
        sleep 3
        printf '.'
    fi

    if [ $i -eq 20 ] ; then
        echo -e "\nTimed out waiting for Pi-hole start, consult check your container logs for more info (\`docker logs pihole\`)"
        exit 1
    fi
done;



sudo chmod u+x pihole.sh #changing the attribute of the file to be executable
sudo ./pihole.sh




### WITH DOCKER:

docker pull pihole/pihole:latest
docker image ls
docker run pihole/pihole

docker create \
  --name=pihole \
  -e TZ=Europe/Madrid \
  -e WEBPASSWORD=password \
  -p 53:53/tcp \
  -p 53:53/udp \
  -p 67:67/udp \
  -p 86:80/tcp \
  -p 443:443/tcp \
  -v /home/pi/etc/pihole:/etc/pihole \
  -v /home/pi/etc/pihole/etc-dnsmasq.d:/etc/dnsmasq.d \
  --restart unless-stopped \
  ghcr.io/pihole/pihole
  
docker container ls
docker inspect 4648tgIDngkfo30 #get IP address
docker logs 4648tgIDngkfo30 | grep pass #get the password 
